(()=>{var _=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(i,p)=>(typeof require!="undefined"?require:i)[p]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var Z=_("@wordpress/element");var j=_("@wordpress/element");var D=_("@wordpress/element"),k=()=>{let[e,i]=(0,D.useState)(()=>{let n=localStorage.getItem("fp_selected_client");return n?parseInt(n):null}),[p,o]=(0,D.useState)(null),[c,m]=(0,D.useState)(!1);(0,D.useEffect)(()=>{e?v(e):o(null)},[e]);let v=async n=>{m(!0);try{let x=await(await fetch(`/wp-json/fp-publisher/v1/clients/${n}`)).json();o(x)}catch(r){console.error("Failed to fetch client:",r),o(null)}finally{m(!1)}};return{selectedClientId:e,currentClient:p,loading:c,selectClient:n=>{i(n),n?localStorage.setItem("fp_selected_client",n.toString()):localStorage.removeItem("fp_selected_client")}}};var R=()=>{let{selectedClientId:e,currentClient:i}=k(),[p,o]=(0,j.useState)({scheduled:0,published_today:0,published_month:0,failed:0,total_accounts:0}),[c,m]=(0,j.useState)([]),[v,g]=(0,j.useState)(!0);(0,j.useEffect)(()=>{n()},[e]);let n=async()=>{g(!0);try{let l=new URLSearchParams;e&&l.set("client_id",e.toString());let[a,u,b,h]=await Promise.all([fetch(`/wp-json/fp-publisher/v1/jobs?${l}&status=pending`).then(s=>s.json()),fetch(`/wp-json/fp-publisher/v1/jobs?${l}&status=completed`).then(s=>s.json()),fetch(`/wp-json/fp-publisher/v1/jobs?${l}&status=failed`).then(s=>s.json()),e?fetch(`/wp-json/fp-publisher/v1/clients/${e}/accounts`).then(s=>s.json()):Promise.resolve({total:0})]);o({scheduled:a.total||0,published_today:0,published_month:u.total||0,failed:b.total||0,total_accounts:h.total||0});let t=await fetch(`/wp-json/fp-publisher/v1/jobs?${l}&limit=10`).then(s=>s.json());m(t.jobs||[])}catch(l){console.error("Failed to fetch dashboard data:",l)}finally{g(!1)}},r=l=>({meta_facebook:"\u{1F4D8}",meta_instagram:"\u{1F4F7}",youtube:"\u{1F4F9}",tiktok:"\u{1F3B5}",google_business:"\u{1F5FA}\uFE0F",wordpress_blog:"\u{1F4DD}"})[l]||"\u{1F4F1}",x=l=>{let a={pending:{label:"Schedulato",class:"status-pending",icon:"\u23F1\uFE0F"},running:{label:"In corso",class:"status-running",icon:"\u25B6\uFE0F"},completed:{label:"Pubblicato",class:"status-completed",icon:"\u2705"},failed:{label:"Fallito",class:"status-failed",icon:"\u274C"}};return a[l]||a.pending},N=l=>{let a=new Date(l),b=new Date().getTime()-a.getTime(),h=Math.floor(b/6e4),t=Math.floor(h/60),s=Math.floor(t/24);return h<1?"Adesso":h<60?`${h} min fa`:t<24?`${t} ore fa`:s<7?`${s} giorni fa`:a.toLocaleDateString("it-IT",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})};return v?React.createElement("div",{className:"fp-dashboard loading"},React.createElement("div",{className:"loading-spinner"},"Caricamento dashboard...")):React.createElement("div",{className:"fp-dashboard"},React.createElement("div",{className:"dashboard-header"},React.createElement("div",null,React.createElement("h1",null,"\u{1F4CA} Dashboard"),i&&React.createElement("p",{className:"client-subtitle"},"Cliente: ",React.createElement("strong",null,i.name))),React.createElement("div",{className:"header-actions"},React.createElement("button",{className:"button button-primary",onClick:()=>window.location.href="/wp-admin/admin.php?page=fp-publisher-composer"},"\u270F\uFE0F Nuovo Post"),React.createElement("button",{className:"button",onClick:n},"\u{1F504} Aggiorna"))),React.createElement("div",{className:"stats-grid"},React.createElement("div",{className:"stat-card scheduled"},React.createElement("div",{className:"stat-icon"},"\u23F1\uFE0F"),React.createElement("div",{className:"stat-content"},React.createElement("div",{className:"stat-value"},p.scheduled),React.createElement("div",{className:"stat-label"},"Schedulati"))),React.createElement("div",{className:"stat-card published"},React.createElement("div",{className:"stat-icon"},"\u2705"),React.createElement("div",{className:"stat-content"},React.createElement("div",{className:"stat-value"},p.published_month),React.createElement("div",{className:"stat-label"},"Pubblicati (mese)"))),React.createElement("div",{className:"stat-card failed"},React.createElement("div",{className:"stat-icon"},"\u274C"),React.createElement("div",{className:"stat-content"},React.createElement("div",{className:"stat-value"},p.failed),React.createElement("div",{className:"stat-label"},"Falliti"))),React.createElement("div",{className:"stat-card accounts"},React.createElement("div",{className:"stat-icon"},"\u{1F4F1}"),React.createElement("div",{className:"stat-content"},React.createElement("div",{className:"stat-value"},p.total_accounts),React.createElement("div",{className:"stat-label"},"Account Connessi")))),React.createElement("div",{className:"quick-actions"},React.createElement("h2",null,"\u26A1 Azioni Rapide"),React.createElement("div",{className:"actions-grid"},React.createElement("button",{className:"action-card",onClick:()=>window.location.href="/wp-admin/admin.php?page=fp-publisher-composer"},React.createElement("span",{className:"action-icon"},"\u270F\uFE0F"),React.createElement("span",{className:"action-label"},"Componi Post")),React.createElement("button",{className:"action-card",onClick:()=>window.location.href="/wp-admin/admin.php?page=fp-publisher-calendar"},React.createElement("span",{className:"action-icon"},"\u{1F4C5}"),React.createElement("span",{className:"action-label"},"Calendario")),React.createElement("button",{className:"action-card",onClick:()=>window.location.href="/wp-admin/admin.php?page=fp-publisher-library"},React.createElement("span",{className:"action-icon"},"\u{1F5BC}\uFE0F"),React.createElement("span",{className:"action-label"},"Libreria Media")),React.createElement("button",{className:"action-card",onClick:()=>window.location.href="/wp-admin/admin.php?page=fp-publisher-analytics"},React.createElement("span",{className:"action-icon"},"\u{1F4C8}"),React.createElement("span",{className:"action-label"},"Analytics")))),React.createElement("div",{className:"recent-activity"},React.createElement("div",{className:"section-header"},React.createElement("h2",null,"\u{1F552} Attivit\xE0 Recente"),React.createElement("a",{href:"/wp-admin/admin.php?page=fp-publisher-jobs",className:"view-all"},"Vedi tutti \u2192")),c.length===0?React.createElement("div",{className:"empty-state"},React.createElement("p",null,"Nessuna attivit\xE0 recente"),React.createElement("button",{className:"button button-primary",onClick:()=>window.location.href="/wp-admin/admin.php?page=fp-publisher-composer"},"Crea il tuo primo post")):React.createElement("div",{className:"activity-list"},c.map(l=>{var u,b,h,t;let a=x(l.status);return React.createElement("div",{key:l.id,className:"activity-item"},React.createElement("div",{className:"activity-icon"},r(l.channel)),React.createElement("div",{className:"activity-content"},React.createElement("div",{className:"activity-title"},((b=(u=l.payload)==null?void 0:u.message)==null?void 0:b.substring(0,60))||"Post senza titolo",((t=(h=l.payload)==null?void 0:h.message)==null?void 0:t.length)>60&&"..."),React.createElement("div",{className:"activity-meta"},React.createElement("span",{className:"channel-name"},l.channel),React.createElement("span",{className:"separator"},"\u2022"),React.createElement("span",{className:"time"},N(l.run_at)))),React.createElement("div",{className:"activity-status"},React.createElement("span",{className:`status-badge ${a.class}`},a.icon," ",a.label)))}))),i&&React.createElement("div",{className:"client-limits"},React.createElement("h2",null,"\u{1F4CA} Limiti Piano"),React.createElement("div",{className:"limits-grid"},React.createElement("div",{className:"limit-item"},React.createElement("span",{className:"limit-label"},"Canali massimi:"),React.createElement("span",{className:"limit-value"},p.total_accounts," / ",i.limits.max_channels===Number.MAX_SAFE_INTEGER?"\u221E":i.limits.max_channels)),React.createElement("div",{className:"limit-item"},React.createElement("span",{className:"limit-label"},"Post mensili:"),React.createElement("span",{className:"limit-value"},p.published_month," / ",i.limits.max_posts_monthly===Number.MAX_SAFE_INTEGER?"\u221E":i.limits.max_posts_monthly)))))};var E=_("@wordpress/element");var O=()=>{var U;let{selectedClientId:e,currentClient:i}=k(),[p,o]=(0,E.useState)(""),[c,m]=(0,E.useState)([]),[v,g]=(0,E.useState)([]),[n,r]=(0,E.useState)([]),[x,N]=(0,E.useState)(""),[l,a]=(0,E.useState)(""),[u,b]=(0,E.useState)(!1);(0,E.useEffect)(()=>{e&&h()},[e]);let h=async()=>{var d;if(e)try{let P=await(await fetch(`/wp-json/fp-publisher/v1/clients/${e}/accounts`)).json(),S=[{id:"meta_facebook",name:"Facebook",icon:"\u{1F4D8}",connected:!1},{id:"meta_instagram",name:"Instagram",icon:"\u{1F4F7}",connected:!1},{id:"youtube",name:"YouTube",icon:"\u{1F4F9}",connected:!1},{id:"tiktok",name:"TikTok",icon:"\u{1F3B5}",connected:!1},{id:"google_business",name:"Google Business",icon:"\u{1F5FA}\uFE0F",connected:!1},{id:"wordpress_blog",name:"WordPress",icon:"\u{1F4DD}",connected:!0}];(d=P.accounts)==null||d.forEach(A=>{let L=S.find(ee=>ee.id===A.channel);L&&(L.connected=!0,L.accountName=A.account_name)}),g(S)}catch(f){console.error("Failed to fetch accounts:",f)}},t=d=>{m(f=>f.includes(d)?f.filter(P=>P!==d):[...f,d])},s=d=>{let f=d.target.files;f&&Array.from(f).forEach(P=>{let S=URL.createObjectURL(P),A=P.type.startsWith("image/")?"image":"video";r(L=>[...L,{url:S,type:A}])})},y=d=>{r(f=>f.filter((P,S)=>S!==d))},C=async(d=!1)=>{if(!e){alert("Seleziona un cliente prima di pubblicare");return}if(c.length===0){alert("Seleziona almeno un canale");return}if(!p.trim()){alert("Inserisci un messaggio");return}b(!0);try{let f=new Date().toISOString();x&&l&&(f=new Date(`${x}T${l}`).toISOString());let S=await(await fetch("/wp-json/fp-publisher/v1/publish/multi-channel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:e,channels:c,plan:{brand:(i==null?void 0:i.name)||"Brand",channels:c,slots:c.map(A=>({channel:A,scheduled_at:f})),template:{title:p.substring(0,100),content:p},status:d?"draft":"ready"},payload:{message:p,media:n.map(A=>({source:A.url,type:A.type}))},publish_at:f})})).json();S.success?(alert(`\u2705 ${d?"Bozza salvata":"Pubblicato"} con successo su ${S.published} canali!`),o(""),m([]),r([]),N(""),a(""),window.location.href="/wp-admin/admin.php?page=fp-publisher"):alert("\u274C Errore durante la pubblicazione")}catch(f){console.error("Publish failed:",f),alert("\u274C Errore durante la pubblicazione")}finally{b(!1)}},w=p.length,M=2200;return e?React.createElement("div",{className:"fp-composer"},React.createElement("div",{className:"composer-header"},React.createElement("h1",null,"\u270F\uFE0F Componi Post"),React.createElement("div",{className:"header-actions"},React.createElement("button",{className:"button",onClick:()=>C(!0),disabled:u},"\u{1F4BE} Salva Bozza"),React.createElement("button",{className:"button button-primary",onClick:()=>C(!1),disabled:u||c.length===0},u?"\u23F3 Pubblicando...":"\u{1F680} Pubblica"))),React.createElement("div",{className:"composer-layout"},React.createElement("div",{className:"composer-main"},React.createElement("div",{className:"message-editor"},React.createElement("textarea",{value:p,onChange:d=>o(d.target.value),placeholder:"Cosa vuoi condividere?",className:"message-textarea",rows:8}),React.createElement("div",{className:"editor-footer"},React.createElement("div",{className:"char-counter"},React.createElement("span",{className:w>M?"over-limit":""},w),React.createElement("span",{className:"separator"},"/"),React.createElement("span",null,M)),React.createElement("div",{className:"editor-tools"},React.createElement("button",{className:"tool-button",onClick:()=>{let d=prompt("Inserisci emoji:");d&&o(f=>f+d)},title:"Aggiungi emoji"},"\u{1F600}"),React.createElement("button",{className:"tool-button",onClick:()=>{let d=prompt("Inserisci hashtag (senza #):");d&&o(f=>f+" #"+d)},title:"Aggiungi hashtag"},"#\uFE0F\u20E3")))),React.createElement("div",{className:"media-section"},React.createElement("div",{className:"media-header"},React.createElement("h3",null,"\u{1F5BC}\uFE0F Media"),React.createElement("label",{className:"button button-small"},"\u{1F4E4} Carica Media",React.createElement("input",{type:"file",accept:"image/*,video/*",multiple:!0,onChange:s,style:{display:"none"}}))),n.length>0&&React.createElement("div",{className:"media-grid"},n.map((d,f)=>React.createElement("div",{key:f,className:"media-item"},d.type==="image"?React.createElement("img",{src:d.url,alt:"Preview"}):React.createElement("video",{src:d.url,controls:!0}),React.createElement("button",{className:"remove-media",onClick:()=>y(f)},"\u2715"))))),React.createElement("div",{className:"scheduling-section"},React.createElement("h3",null,"\u23F0 Programmazione"),React.createElement("div",{className:"scheduling-inputs"},React.createElement("div",{className:"input-group"},React.createElement("label",null,"Data"),React.createElement("input",{type:"date",value:x,onChange:d=>N(d.target.value),min:new Date().toISOString().split("T")[0]})),React.createElement("div",{className:"input-group"},React.createElement("label",null,"Ora"),React.createElement("input",{type:"time",value:l,onChange:d=>a(d.target.value)})),x&&l&&React.createElement("button",{className:"button button-small",onClick:()=>{N(""),a("")}},"\u2715 Rimuovi")),!x&&!l&&React.createElement("p",{className:"scheduling-hint"},"\u{1F4A1} Lascia vuoto per pubblicare immediatamente"))),React.createElement("div",{className:"composer-sidebar"},React.createElement("div",{className:"channels-section"},React.createElement("h3",null,"\u{1F4F1} Canali di Pubblicazione"),React.createElement("p",{className:"channels-hint"},"Seleziona i canali dove pubblicare questo post"),React.createElement("div",{className:"channels-list"},v.map(d=>React.createElement("div",{key:d.id,className:`channel-item ${d.connected?"":"disabled"} ${c.includes(d.id)?"selected":""}`,onClick:()=>d.connected&&t(d.id)},React.createElement("div",{className:"channel-info"},React.createElement("span",{className:"channel-icon"},d.icon),React.createElement("div",{className:"channel-details"},React.createElement("div",{className:"channel-name"},d.name),d.accountName&&React.createElement("div",{className:"channel-account"},d.accountName),!d.connected&&React.createElement("div",{className:"channel-status"},"Non connesso"))),d.connected&&React.createElement("div",{className:"channel-checkbox"},React.createElement("input",{type:"checkbox",checked:c.includes(d.id),onChange:()=>{}}))))),c.length>0&&React.createElement("div",{className:"selected-count"},"\u2705 ",c.length," canale",c.length>1?"i":""," selezionat",c.length>1?"i":"o"),React.createElement("button",{className:"button button-full",onClick:()=>window.location.href=`/wp-admin/admin.php?page=fp-publisher-accounts&client_id=${e}`},"\u2699\uFE0F Gestisci Account")),p&&React.createElement("div",{className:"preview-section"},React.createElement("h3",null,"\u{1F441}\uFE0F Anteprima"),React.createElement("div",{className:"preview-card"},React.createElement("div",{className:"preview-header"},React.createElement("span",{className:"preview-avatar"},i!=null&&i.logo_url?React.createElement("img",{src:i.logo_url,alt:i.name}):React.createElement("span",{style:{backgroundColor:(i==null?void 0:i.color)||"#666"}},(U=i==null?void 0:i.name)==null?void 0:U.substring(0,2).toUpperCase())),React.createElement("div",{className:"preview-author"},React.createElement("div",{className:"preview-name"},i==null?void 0:i.name),React.createElement("div",{className:"preview-time"},"Adesso"))),React.createElement("div",{className:"preview-content"},p),n.length>0&&React.createElement("div",{className:"preview-media"},n[0].type==="image"?React.createElement("img",{src:n[0].url,alt:"Preview"}):React.createElement("video",{src:n[0].url}))))))):React.createElement("div",{className:"fp-composer"},React.createElement("div",{className:"composer-empty"},React.createElement("h2",null,"\u26A0\uFE0F Nessun Cliente Selezionato"),React.createElement("p",null,"Seleziona un cliente dal menu in alto per iniziare a comporre")))};var I=_("@wordpress/element");var J=()=>{let{selectedClientId:e}=k(),[i,p]=(0,I.useState)(new Date),[o,c]=(0,I.useState)([]),[m,v]=(0,I.useState)("month");(0,I.useEffect)(()=>{e&&g()},[e,i]);let g=async()=>{if(e)try{let b=new URLSearchParams({client_id:e.toString()}),s=((await(await fetch(`/wp-json/fp-publisher/v1/jobs?${b}`)).json()).jobs||[]).map(y=>{var C,w,M;return{id:y.id,title:((w=(C=y.payload)==null?void 0:C.message)==null?void 0:w.substring(0,50))||"Post",channel:y.channel,date:y.run_at.split("T")[0],time:((M=y.run_at.split("T")[1])==null?void 0:M.substring(0,5))||"00:00",status:y.status}});c(s)}catch(b){console.error("Failed to fetch events:",b)}},n=()=>{let b=i.getFullYear(),h=i.getMonth();return new Date(b,h+1,0).getDate()},r=()=>{let b=i.getFullYear(),h=i.getMonth();return new Date(b,h,1).getDay()},x=b=>{let h=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(b).padStart(2,"0")}`;return o.filter(t=>t.date===h)},N=()=>{p(new Date(i.getFullYear(),i.getMonth()-1))},l=()=>{p(new Date(i.getFullYear(),i.getMonth()+1))},a=()=>{p(new Date)},u=()=>{let b=n(),h=r(),t=[];for(let s=0;s<h;s++)t.push(React.createElement("div",{key:`empty-${s}`,className:"calendar-day empty"}));for(let s=1;s<=b;s++){let y=x(s),C=new Date().toDateString()===new Date(i.getFullYear(),i.getMonth(),s).toDateString();t.push(React.createElement("div",{key:s,className:`calendar-day ${C?"today":""}`},React.createElement("div",{className:"day-number"},s),React.createElement("div",{className:"day-events"},y.slice(0,3).map(w=>React.createElement("div",{key:w.id,className:`event event-${w.status}`},React.createElement("span",{className:"event-time"},w.time),React.createElement("span",{className:"event-title"},w.title))),y.length>3&&React.createElement("div",{className:"event-more"},"+",y.length-3," altri"))))}return t};return React.createElement("div",{className:"fp-calendar"},React.createElement("div",{className:"calendar-header"},React.createElement("h1",null,"\u{1F4C5} Calendario Pubblicazioni"),React.createElement("div",{className:"calendar-controls"},React.createElement("button",{className:"button",onClick:N},"\u2190 Precedente"),React.createElement("button",{className:"button",onClick:a},"Oggi"),React.createElement("button",{className:"button",onClick:l},"Successivo \u2192"))),React.createElement("div",{className:"calendar-month-title"},i.toLocaleDateString("it-IT",{month:"long",year:"numeric"})),React.createElement("div",{className:"calendar-grid"},React.createElement("div",{className:"calendar-weekdays"},["Dom","Lun","Mar","Mer","Gio","Ven","Sab"].map(b=>React.createElement("div",{key:b,className:"weekday"},b))),React.createElement("div",{className:"calendar-days"},u())),React.createElement("div",{className:"calendar-legend"},React.createElement("div",{className:"legend-item"},React.createElement("span",{className:"legend-dot pending"}),React.createElement("span",null,"Schedulato")),React.createElement("div",{className:"legend-item"},React.createElement("span",{className:"legend-dot completed"}),React.createElement("span",null,"Pubblicato")),React.createElement("div",{className:"legend-item"},React.createElement("span",{className:"legend-dot failed"}),React.createElement("span",null,"Fallito"))))};var W=()=>{let{currentClient:e}=k();return React.createElement("div",{className:"fp-analytics"},React.createElement("h1",null,"\u{1F4C8} Analytics"),React.createElement("div",{className:"analytics-placeholder"},React.createElement("div",{className:"placeholder-icon"},"\u{1F4CA}"),React.createElement("h2",null,"Analytics in arrivo!"),React.createElement("p",null,"Questa sezione mostrer\xE0 statistiche dettagliate per"," ",e?e.name:"i tuoi clienti",":"),React.createElement("ul",null,React.createElement("li",null,"\u{1F4CA} Performance post per canale"),React.createElement("li",null,"\u{1F4C8} Crescita follower nel tempo"),React.createElement("li",null,"\u{1F4AC} Engagement rate"),React.createElement("li",null,"\u{1F3AF} Migliori orari di pubblicazione"),React.createElement("li",null,"\u{1F4F1} Confronto canali"),React.createElement("li",null,"\u{1F4C5} Report mensili")),React.createElement("button",{className:"button button-primary"},"\u{1F680} Richiedi Demo Analytics")))};var G=()=>React.createElement("div",{className:"fp-media-library"},React.createElement("h1",null,"\u{1F5BC}\uFE0F Libreria Media"),React.createElement("div",{className:"library-placeholder"},React.createElement("div",{className:"placeholder-icon"},"\u{1F4C1}"),React.createElement("h2",null,"Libreria Media in arrivo!"),React.createElement("p",null,"Qui potrai gestire tutti i tuoi asset multimediali:"),React.createElement("ul",null,React.createElement("li",null,"\u{1F4F7} Immagini"),React.createElement("li",null,"\u{1F3AC} Video"),React.createElement("li",null,"\u{1F3B5} Audio"),React.createElement("li",null,"\u{1F4C4} Documenti"),React.createElement("li",null,"\u{1F3F7}\uFE0F Tag e organizzazione"),React.createElement("li",null,"\u{1F50D} Ricerca avanzata")),React.createElement("button",{className:"button button-primary"},"\u{1F4E4} Carica i tuoi primi media")));var F=_("@wordpress/element"),Y=()=>{let[e,i]=(0,F.useState)([]),[p,o]=(0,F.useState)(!0),[c,m]=(0,F.useState)(!1),[v,g]=(0,F.useState)(null),[n,r]=(0,F.useState)("");(0,F.useEffect)(()=>{x()},[]);let x=async()=>{o(!0);try{let s=await(await fetch("/wp-json/fp-publisher/v1/clients")).json();i(s.clients||[])}catch(t){console.error("Failed to fetch clients:",t)}finally{o(!1)}},N=()=>{g(null),m(!0)},l=t=>{g(t),m(!0)},a=async t=>{if(confirm(`Sei sicuro di voler eliminare il cliente "${t.name}"? Questa azione non pu\xF2 essere annullata.`))try{await fetch(`/wp-json/fp-publisher/v1/clients/${t.id}`,{method:"DELETE"}),x()}catch(s){console.error("Failed to delete client:",s),alert("Errore durante l'eliminazione del cliente")}},u=e.filter(t=>t.name.toLowerCase().includes(n.toLowerCase())||t.slug.toLowerCase().includes(n.toLowerCase())),b=t=>{let s={active:{label:"Attivo",class:"status-active",icon:"\u2705"},paused:{label:"Pausato",class:"status-paused",icon:"\u23F8\uFE0F"},archived:{label:"Archiviato",class:"status-archived",icon:"\u{1F4E6}"}};return s[t]||s.active},h=t=>{let s={free:{label:"Free",class:"plan-free"},basic:{label:"Basic",class:"plan-basic"},pro:{label:"Pro",class:"plan-pro"},agency:{label:"Agency",class:"plan-agency"},enterprise:{label:"Enterprise",class:"plan-enterprise"}};return s[t]||s.free};return React.createElement("div",{className:"fp-clients-management"},React.createElement("div",{className:"page-header"},React.createElement("h1",null,"\u{1F465} Gestione Clienti"),React.createElement("button",{className:"button button-primary",onClick:N},"+ Nuovo Cliente")),React.createElement("div",{className:"clients-toolbar"},React.createElement("div",{className:"search-box"},React.createElement("input",{type:"search",placeholder:"\u{1F50D} Cerca clienti...",value:n,onChange:t=>r(t.target.value)})),React.createElement("div",{className:"filters"})),p?React.createElement("div",{className:"loading-state"},"Caricamento clienti..."):u.length===0?React.createElement("div",{className:"empty-state"},React.createElement("p",null,"Nessun cliente trovato."),React.createElement("button",{className:"button button-primary",onClick:N},"Crea il tuo primo cliente")):React.createElement("div",{className:"clients-grid"},u.map(t=>{let s=b(t.status),y=h(t.billing_plan);return React.createElement("div",{key:t.id,className:"client-card"},React.createElement("div",{className:"client-card-header"},React.createElement("div",{className:"client-info"},t.logo_url?React.createElement("img",{src:t.logo_url,alt:t.name,className:"client-card-logo"}):React.createElement("span",{className:"client-card-badge",style:{backgroundColor:t.color}},t.name.substring(0,2).toUpperCase()),React.createElement("div",null,React.createElement("h3",null,t.name),React.createElement("span",{className:`status-badge ${s.class}`},s.icon," ",s.label)))),React.createElement("div",{className:"client-card-body"},React.createElement("div",{className:"client-stat"},React.createElement("span",{className:"stat-label"},"\u{1F4F1} Canali:"),React.createElement("span",{className:"stat-value"},t.limits.max_channels===Number.MAX_SAFE_INTEGER?"Illimitati":t.limits.max_channels)),React.createElement("div",{className:"client-stat"},React.createElement("span",{className:"stat-label"},"\u{1F4CA} Post/mese:"),React.createElement("span",{className:"stat-value"},t.limits.max_posts_monthly===Number.MAX_SAFE_INTEGER?"Illimitati":t.limits.max_posts_monthly)),React.createElement("div",{className:"client-stat"},React.createElement("span",{className:"stat-label"},"\u{1F465} Team:"),React.createElement("span",{className:"stat-value"},"Max ",t.limits.max_team_members===Number.MAX_SAFE_INTEGER?"Illimitati":t.limits.max_team_members)),React.createElement("div",{className:"client-stat"},React.createElement("span",{className:"stat-label"},"\u{1F4B0} Piano:"),React.createElement("span",{className:`plan-badge ${y.class}`},y.label))),React.createElement("div",{className:"client-card-footer"},React.createElement("button",{className:"button button-small",onClick:()=>window.location.href=`/wp-admin/admin.php?page=fp-publisher&client_id=${t.id}`},"Dashboard"),React.createElement("button",{className:"button button-small",onClick:()=>l(t)},"Modifica"),React.createElement("button",{className:"button button-small",onClick:()=>window.location.href=`/wp-admin/admin.php?page=fp-publisher-accounts&client_id=${t.id}`},"Account Social"),React.createElement("button",{className:"button button-small button-link-delete",onClick:()=>a(t)},"Elimina")))})),c&&React.createElement(te,{client:v,onClose:()=>{m(!1),g(null)},onSave:()=>{m(!1),g(null),x()}}))},te=({client:e,onClose:i,onSave:p})=>{let[o,c]=(0,F.useState)({name:(e==null?void 0:e.name)||"",slug:(e==null?void 0:e.slug)||"",logo_url:(e==null?void 0:e.logo_url)||"",website:(e==null?void 0:e.website)||"",industry:(e==null?void 0:e.industry)||"",timezone:(e==null?void 0:e.timezone)||"Europe/Rome",color:(e==null?void 0:e.color)||"#666666",status:(e==null?void 0:e.status)||"active"}),[m,v]=(0,F.useState)(!1);return React.createElement("div",{className:"fp-modal-overlay",onClick:i},React.createElement("div",{className:"fp-modal",onClick:n=>n.stopPropagation()},React.createElement("div",{className:"modal-header"},React.createElement("h2",null,e?"\u270F\uFE0F Modifica Cliente":"\u2795 Nuovo Cliente"),React.createElement("button",{className:"close-button",onClick:i},"\u2715")),React.createElement("form",{onSubmit:async n=>{n.preventDefault(),v(!0);try{let r=e?`/wp-json/fp-publisher/v1/clients/${e.id}`:"/wp-json/fp-publisher/v1/clients";await fetch(r,{method:e?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),p()}catch(r){console.error("Failed to save client:",r),alert("Errore durante il salvataggio del cliente")}finally{v(!1)}}},React.createElement("div",{className:"modal-body"},React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"name"},"Nome Cliente *"),React.createElement("input",{type:"text",id:"name",value:o.name,onChange:n=>c({...o,name:n.target.value}),required:!0})),React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"slug"},"Slug (URL-friendly)"),React.createElement("input",{type:"text",id:"slug",value:o.slug,onChange:n=>c({...o,slug:n.target.value}),placeholder:"Auto-generato dal nome"}),React.createElement("small",null,"Lascia vuoto per generazione automatica")),React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"logo_url"},"URL Logo"),React.createElement("input",{type:"url",id:"logo_url",value:o.logo_url,onChange:n=>c({...o,logo_url:n.target.value}),placeholder:"https://..."})),React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"website"},"Sito Web"),React.createElement("input",{type:"url",id:"website",value:o.website,onChange:n=>c({...o,website:n.target.value}),placeholder:"https://..."})),React.createElement("div",{className:"form-row"},React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"industry"},"Settore"),React.createElement("select",{id:"industry",value:o.industry,onChange:n=>c({...o,industry:n.target.value})},React.createElement("option",{value:""},"Seleziona settore"),React.createElement("option",{value:"technology"},"Technology"),React.createElement("option",{value:"food"},"Food & Beverage"),React.createElement("option",{value:"retail"},"Retail"),React.createElement("option",{value:"healthcare"},"Healthcare"),React.createElement("option",{value:"education"},"Education"),React.createElement("option",{value:"entertainment"},"Entertainment"),React.createElement("option",{value:"other"},"Altro"))),React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"timezone"},"Timezone"),React.createElement("select",{id:"timezone",value:o.timezone,onChange:n=>c({...o,timezone:n.target.value})},React.createElement("option",{value:"UTC"},"UTC"),React.createElement("option",{value:"Europe/Rome"},"Europe/Rome"),React.createElement("option",{value:"Europe/London"},"Europe/London"),React.createElement("option",{value:"America/New_York"},"America/New_York"),React.createElement("option",{value:"America/Los_Angeles"},"America/Los_Angeles")))),React.createElement("div",{className:"form-row"},React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"color"},"Colore Brand"),React.createElement("div",{className:"color-picker"},React.createElement("input",{type:"color",id:"color",value:o.color,onChange:n=>c({...o,color:n.target.value})}),React.createElement("input",{type:"text",value:o.color,onChange:n=>c({...o,color:n.target.value}),placeholder:"#666666",pattern:"^#[0-9A-Fa-f]{6}$"}))),React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"billing_plan"},"Piano di Fatturazione"),React.createElement("select",{id:"billing_plan",value:o.billing_plan,onChange:n=>c({...o,billing_plan:n.target.value})},React.createElement("option",{value:"free"},"Free"),React.createElement("option",{value:"basic"},"Basic (\u20AC15/mese)"),React.createElement("option",{value:"pro"},"Pro (\u20AC29/mese)"),React.createElement("option",{value:"agency"},"Agency (\u20AC99/mese)"),React.createElement("option",{value:"enterprise"},"Enterprise (Custom)")))),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Status"),React.createElement("div",{className:"radio-group"},React.createElement("label",null,React.createElement("input",{type:"radio",name:"status",value:"active",checked:o.status==="active",onChange:n=>c({...o,status:n.target.value})}),"Attivo"),React.createElement("label",null,React.createElement("input",{type:"radio",name:"status",value:"paused",checked:o.status==="paused",onChange:n=>c({...o,status:n.target.value})}),"Pausato"),React.createElement("label",null,React.createElement("input",{type:"radio",name:"status",value:"archived",checked:o.status==="archived",onChange:n=>c({...o,status:n.target.value})}),"Archiviato")))),React.createElement("div",{className:"modal-footer"},React.createElement("button",{type:"button",className:"button",onClick:i,disabled:m},"Annulla"),e&&React.createElement("button",{type:"button",className:"button button-link-delete",onClick:()=>{handleDeleteClient(e),i()},disabled:m},"Elimina Cliente"),React.createElement("button",{type:"submit",className:"button button-primary",disabled:m},m?"Salvataggio...":"\u{1F4BE} Salva Modifiche")))))};var T=_("@wordpress/element");var V=()=>{let{selectedClientId:e,currentClient:i}=k(),[p,o]=(0,T.useState)([]),[c,m]=(0,T.useState)(!0);(0,T.useEffect)(()=>{e&&v()},[e]);let v=async()=>{if(e){m(!0);try{let u=await(await fetch(`/wp-json/fp-publisher/v1/clients/${e}/accounts`)).json();o(u.accounts||[])}catch(a){console.error("Failed to fetch accounts:",a)}finally{m(!1)}}},g=a=>{alert(`Connessione OAuth per ${a} - Implementare flow OAuth 2.0`)},n=async a=>{if(e&&confirm("Vuoi davvero disconnettere questo account?"))try{await fetch(`/wp-json/fp-publisher/v1/clients/${e}/accounts/${a}`,{method:"DELETE"}),v()}catch(u){console.error("Failed to disconnect account:",u),alert("Errore durante la disconnessione")}},r=a=>({meta_facebook:"\u{1F4D8}",meta_instagram:"\u{1F4F7}",youtube:"\u{1F4F9}",tiktok:"\u{1F3B5}",google_business:"\u{1F5FA}\uFE0F",wordpress_blog:"\u{1F4DD}"})[a]||"\u{1F4F1}",x=a=>({meta_facebook:"Facebook",meta_instagram:"Instagram",youtube:"YouTube",tiktok:"TikTok",google_business:"Google Business",wordpress_blog:"WordPress Blog"})[a]||a,N=[{id:"meta_facebook",name:"Facebook",icon:"\u{1F4D8}",oauth:!0},{id:"meta_instagram",name:"Instagram",icon:"\u{1F4F7}",oauth:!0},{id:"youtube",name:"YouTube",icon:"\u{1F4F9}",oauth:!0},{id:"tiktok",name:"TikTok",icon:"\u{1F3B5}",oauth:!0},{id:"google_business",name:"Google Business",icon:"\u{1F5FA}\uFE0F",oauth:!0},{id:"wordpress_blog",name:"WordPress Blog",icon:"\u{1F4DD}",oauth:!1}],l=a=>p.some(u=>u.channel===a&&u.status==="active");return e?React.createElement("div",{className:"fp-social-accounts"},React.createElement("div",{className:"page-header"},React.createElement("div",null,React.createElement("h1",null,"\u{1F50C} Account Social"),i&&React.createElement("p",{className:"subtitle"},"Cliente: ",React.createElement("strong",null,i.name))),React.createElement("button",{className:"button",onClick:v},"\u{1F504} Aggiorna")),c?React.createElement("div",{className:"loading-spinner"},"Caricamento account..."):React.createElement(React.Fragment,null,p.length>0&&React.createElement("div",{className:"section"},React.createElement("h2",null,"\u2705 Account Connessi (",p.length,")"),React.createElement("div",{className:"accounts-grid"},p.map(a=>React.createElement("div",{key:a.id,className:"account-card connected"},React.createElement("div",{className:"account-icon"},r(a.channel)),React.createElement("div",{className:"account-info"},React.createElement("h3",null,x(a.channel)),React.createElement("p",{className:"account-name"},a.account_name),React.createElement("p",{className:"account-meta"},"Connesso il ",new Date(a.connected_at).toLocaleDateString("it-IT"))),React.createElement("div",{className:"account-actions"},React.createElement("span",{className:"status-badge active"},"\u2713 Attivo"),React.createElement("button",{className:"button button-link-delete",onClick:()=>n(a.id)},"Disconnetti")))))),React.createElement("div",{className:"section"},React.createElement("h2",null,"\u2795 Connetti Nuovo Account"),React.createElement("div",{className:"channels-grid"},N.map(a=>{let u=l(a.id);return React.createElement("div",{key:a.id,className:`channel-card ${u?"disabled":""}`},React.createElement("div",{className:"channel-icon"},a.icon),React.createElement("h3",null,a.name),a.oauth&&React.createElement("p",{className:"channel-meta"},"OAuth 2.0"),u?React.createElement("button",{className:"button",disabled:!0},"\u2713 Connesso"):React.createElement("button",{className:"button button-primary",onClick:()=>g(a.id)},"+ Connetti"))}))),React.createElement("div",{className:"section help-section"},React.createElement("h3",null,"\u2139\uFE0F Come Connettere Account"),React.createElement("ol",null,React.createElement("li",null,'Click su "',React.createElement("strong",null,"+ Connetti"),'" per il canale desiderato'),React.createElement("li",null,"Segui il flusso OAuth 2.0 (login + autorizzazione)"),React.createElement("li",null,`Una volta connesso, l'account apparir\xE0 in "Account Connessi"`),React.createElement("li",null,"Potrai usarlo nel Composer per pubblicare contenuti")),React.createElement("div",{className:"info-box"},React.createElement("strong",null,"\u{1F4A1} Nota:")," WordPress Blog non richiede OAuth perch\xE9 pubblichi direttamente sul tuo sito WordPress locale.")))):React.createElement("div",{className:"fp-social-accounts"},React.createElement("div",{className:"empty-state"},React.createElement("h2",null,"\u{1F50C} Account Social"),React.createElement("p",null,"Seleziona un cliente dal dropdown in alto per gestire gli account social.")))};var B=_("@wordpress/element");var q=()=>{let{selectedClientId:e}=k(),[i,p]=(0,B.useState)([]),[o,c]=(0,B.useState)(!0),[m,v]=(0,B.useState)("all"),[g,n]=(0,B.useState)(1),[r,x]=(0,B.useState)(0),N=20;(0,B.useEffect)(()=>{l()},[e,m,g]);let l=async()=>{c(!0);try{let t=new URLSearchParams;e&&t.set("client_id",e.toString()),m!=="all"&&t.set("status",m),t.set("limit",N.toString()),t.set("offset",((g-1)*N).toString());let y=await(await fetch(`/wp-json/fp-publisher/v1/jobs?${t}`)).json();p(y.jobs||[]),x(y.total||0)}catch(t){console.error("Failed to fetch jobs:",t)}finally{c(!1)}},a=t=>({meta_facebook:"\u{1F4D8}",meta_instagram:"\u{1F4F7}",youtube:"\u{1F4F9}",tiktok:"\u{1F3B5}",google_business:"\u{1F5FA}\uFE0F",wordpress_blog:"\u{1F4DD}"})[t]||"\u{1F4F1}",u=t=>{let s={pending:{label:"In attesa",class:"status-pending",icon:"\u23F1\uFE0F"},running:{label:"In esecuzione",class:"status-running",icon:"\u25B6\uFE0F"},completed:{label:"Completato",class:"status-completed",icon:"\u2705"},failed:{label:"Fallito",class:"status-failed",icon:"\u274C"}};return s[t]||s.pending},b=t=>new Date(t).toLocaleString("it-IT",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}),h=Math.ceil(r/N);return React.createElement("div",{className:"fp-jobs"},React.createElement("div",{className:"page-header"},React.createElement("div",null,React.createElement("h1",null,"\u{1F4CB} Cronologia Job"),React.createElement("p",{className:"subtitle"},"Visualizza lo stato di tutti i job di pubblicazione")),React.createElement("div",{className:"header-actions"},React.createElement("button",{className:"button",onClick:l},"\u{1F504} Aggiorna"))),React.createElement("div",{className:"filters"},React.createElement("div",{className:"filter-group"},React.createElement("label",null,"Filtra per stato:"),React.createElement("select",{value:m,onChange:t=>{v(t.target.value),n(1)}},React.createElement("option",{value:"all"},"Tutti"),React.createElement("option",{value:"pending"},"In attesa"),React.createElement("option",{value:"running"},"In esecuzione"),React.createElement("option",{value:"completed"},"Completati"),React.createElement("option",{value:"failed"},"Falliti"))),React.createElement("div",{className:"stats-inline"},React.createElement("span",null,"Totale job: ",React.createElement("strong",null,r)),h>1&&React.createElement("span",null,"Pagina ",React.createElement("strong",null,g)," di ",React.createElement("strong",null,h)))),o?React.createElement("div",{className:"loading-spinner"},"Caricamento job..."):i.length===0?React.createElement("div",{className:"empty-state"},React.createElement("h2",null,"\u{1F4ED} Nessun Job Trovato"),React.createElement("p",null,"Non ci sono job ",m!=="all"?`con stato "${m}"`:"in questo momento","."),React.createElement("button",{className:"button button-primary",onClick:()=>window.location.href="/wp-admin/admin.php?page=fp-publisher-composer"},"\u270F\uFE0F Crea Nuovo Post")):React.createElement(React.Fragment,null,React.createElement("div",{className:"jobs-table"},React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"ID"),React.createElement("th",null,"Canale"),React.createElement("th",null,"Messaggio"),React.createElement("th",null,"Stato"),React.createElement("th",null,"Programmato per"),React.createElement("th",null,"Tentativi"),React.createElement("th",null,"Azioni"))),React.createElement("tbody",null,i.map(t=>{var y,C,w;let s=u(t.status);return React.createElement("tr",{key:t.id},React.createElement("td",null,"#",t.id),React.createElement("td",null,React.createElement("span",{className:"channel-badge"},a(t.channel)," ",t.channel)),React.createElement("td",{className:"message-cell"},((C=(y=t.payload)==null?void 0:y.message)==null?void 0:C.substring(0,50))||"N/A",((w=t.payload)==null?void 0:w.message)&&t.payload.message.length>50&&"..."),React.createElement("td",null,React.createElement("span",{className:`status-badge ${s.class}`},s.icon," ",s.label)),React.createElement("td",null,b(t.run_at)),React.createElement("td",null,React.createElement("span",{className:t.attempts>1?"text-warning":""},t.attempts)),React.createElement("td",null,React.createElement("button",{className:"button button-small",onClick:()=>alert(`Job #${t.id}

Dettagli:
${JSON.stringify(t,null,2)}`)},"\u{1F441}\uFE0F Dettagli")))})))),h>1&&React.createElement("div",{className:"pagination"},React.createElement("button",{className:"button",disabled:g===1,onClick:()=>n(g-1)},"\u2190 Precedente"),React.createElement("span",{className:"page-info"},"Pagina ",g," di ",h),React.createElement("button",{className:"button",disabled:g===h,onClick:()=>n(g+1)},"Successiva \u2192")),React.createElement("div",{className:"legend"},React.createElement("h3",null,"Legenda Stati"),React.createElement("ul",null,React.createElement("li",null,React.createElement("span",{className:"status-badge status-pending"},"\u23F1\uFE0F In attesa")," - Job programmato, in attesa di esecuzione"),React.createElement("li",null,React.createElement("span",{className:"status-badge status-running"},"\u25B6\uFE0F In esecuzione")," - Worker sta processando il job"),React.createElement("li",null,React.createElement("span",{className:"status-badge status-completed"},"\u2705 Completato")," - Pubblicato con successo"),React.createElement("li",null,React.createElement("span",{className:"status-badge status-failed"},"\u274C Fallito")," - Errore durante la pubblicazione")))))};var $=_("@wordpress/element"),Q=()=>{var g,n;let[e,i]=(0,$.useState)({worker_enabled:!0,worker_interval:60,max_retries:3,retry_backoff:300,circuit_breaker_enabled:!0,circuit_breaker_threshold:5,metrics_enabled:!0}),[p,o]=(0,$.useState)(!1),[c,m]=(0,$.useState)(!1),v=async()=>{o(!0),m(!1);try{await new Promise(r=>setTimeout(r,1e3)),m(!0),setTimeout(()=>m(!1),3e3)}catch(r){console.error("Failed to save settings:",r),alert("Errore durante il salvataggio delle impostazioni")}finally{o(!1)}};return React.createElement("div",{className:"fp-settings"},React.createElement("div",{className:"page-header"},React.createElement("div",null,React.createElement("h1",null,"\u2699\uFE0F Impostazioni"),React.createElement("p",{className:"subtitle"},"Configura il comportamento del plugin"))),React.createElement("div",{className:"settings-container"},React.createElement("div",{className:"settings-section"},React.createElement("h2",null,"\u{1F504} Worker Queue"),React.createElement("p",{className:"section-description"},"Il worker processa i job di pubblicazione in background usando WP-Cron."),React.createElement("div",{className:"setting-item"},React.createElement("label",{className:"setting-label"},React.createElement("input",{type:"checkbox",checked:e.worker_enabled,onChange:r=>i({...e,worker_enabled:r.target.checked})}),React.createElement("strong",null,"Abilita Worker")),React.createElement("p",{className:"setting-description"},"Se disabilitato, i job non verranno processati automaticamente.")),React.createElement("div",{className:"setting-item"},React.createElement("label",{className:"setting-label"},React.createElement("strong",null,"Intervallo Worker (secondi)")),React.createElement("input",{type:"number",min:"30",max:"600",value:e.worker_interval,onChange:r=>i({...e,worker_interval:parseInt(r.target.value)}),className:"small-input"}),React.createElement("p",{className:"setting-description"},"Ogni quanti secondi il worker controlla nuovi job da processare (min: 30, max: 600)."))),React.createElement("div",{className:"settings-section"},React.createElement("h2",null,"\u{1F501} Retry Logic"),React.createElement("p",{className:"section-description"},"Configura come gestire i job falliti."),React.createElement("div",{className:"setting-item"},React.createElement("label",{className:"setting-label"},React.createElement("strong",null,"Tentativi Massimi")),React.createElement("input",{type:"number",min:"1",max:"10",value:e.max_retries,onChange:r=>i({...e,max_retries:parseInt(r.target.value)}),className:"small-input"}),React.createElement("p",{className:"setting-description"},"Quante volte riprovare un job fallito prima di spostarlo nel Dead Letter Queue.")),React.createElement("div",{className:"setting-item"},React.createElement("label",{className:"setting-label"},React.createElement("strong",null,"Backoff Esponenziale (secondi)")),React.createElement("input",{type:"number",min:"60",max:"3600",value:e.retry_backoff,onChange:r=>i({...e,retry_backoff:parseInt(r.target.value)}),className:"small-input"}),React.createElement("p",{className:"setting-description"},"Tempo base tra un tentativo e l'altro. Viene moltiplicato esponenzialmente (60 \u2192 120 \u2192 240)."))),React.createElement("div",{className:"settings-section"},React.createElement("h2",null,"\u{1F6E1}\uFE0F Circuit Breaker"),React.createElement("p",{className:"section-description"},"Protegge da cascading failures quando un'API \xE8 down."),React.createElement("div",{className:"setting-item"},React.createElement("label",{className:"setting-label"},React.createElement("input",{type:"checkbox",checked:e.circuit_breaker_enabled,onChange:r=>i({...e,circuit_breaker_enabled:r.target.checked})}),React.createElement("strong",null,"Abilita Circuit Breaker")),React.createElement("p",{className:"setting-description"},"Se un canale fallisce ripetutamente, viene temporaneamente disabilitato.")),React.createElement("div",{className:"setting-item"},React.createElement("label",{className:"setting-label"},React.createElement("strong",null,"Soglia Fallimenti")),React.createElement("input",{type:"number",min:"3",max:"20",value:e.circuit_breaker_threshold,onChange:r=>i({...e,circuit_breaker_threshold:parseInt(r.target.value)}),className:"small-input"}),React.createElement("p",{className:"setting-description"},"Dopo quanti fallimenti consecutivi aprire il circuit breaker."))),React.createElement("div",{className:"settings-section"},React.createElement("h2",null,"\u{1F4CA} Monitoring & Metrics"),React.createElement("p",{className:"section-description"},"Raccogli metriche per monitorare le performance del sistema."),React.createElement("div",{className:"setting-item"},React.createElement("label",{className:"setting-label"},React.createElement("input",{type:"checkbox",checked:e.metrics_enabled,onChange:r=>i({...e,metrics_enabled:r.target.checked})}),React.createElement("strong",null,"Abilita Metriche")),React.createElement("p",{className:"setting-description"},"Traccia job processati, errori, tempi di esecuzione (formato Prometheus-ready)."))),React.createElement("div",{className:"settings-section"},React.createElement("h2",null,"\u2139\uFE0F Informazioni Sistema"),React.createElement("div",{className:"info-grid"},React.createElement("div",{className:"info-item"},React.createElement("strong",null,"PHP Version:"),React.createElement("span",null,((g=window.fpPublisher)==null?void 0:g.phpVersion)||"N/A")),React.createElement("div",{className:"info-item"},React.createElement("strong",null,"WordPress Version:"),React.createElement("span",null,((n=window.fpPublisher)==null?void 0:n.wpVersion)||"N/A")),React.createElement("div",{className:"info-item"},React.createElement("strong",null,"Plugin Version:"),React.createElement("span",null,"0.2.0")),React.createElement("div",{className:"info-item"},React.createElement("strong",null,"WP-Cron Status:"),React.createElement("span",{className:"status-badge status-completed"},"\u2713 Attivo")))),React.createElement("div",{className:"settings-actions"},React.createElement("button",{className:"button button-primary button-large",onClick:v,disabled:p},p?"\u{1F4BE} Salvataggio...":"\u{1F4BE} Salva Impostazioni"),c&&React.createElement("span",{className:"save-notice"},"\u2705 Impostazioni salvate con successo!")),React.createElement("div",{className:"settings-help"},React.createElement("h3",null,"\u{1F4A1} Suggerimenti"),React.createElement("ul",null,React.createElement("li",null,React.createElement("strong",null,"Worker Interval:")," Un valore basso (30s) significa pubblicazione pi\xF9 rapida ma pi\xF9 carico server."),React.createElement("li",null,React.createElement("strong",null,"Max Retries:")," Aumenta se hai API instabili, diminuisci per fallire velocemente."),React.createElement("li",null,React.createElement("strong",null,"Circuit Breaker:")," Utile in produzione per evitare sprechi quando un'API \xE8 completamente down."),React.createElement("li",null,React.createElement("strong",null,"Metrics:")," Consigliato per production, aiuta a debuggare problemi.")))))};var z=_("@wordpress/element"),H=({onClientChange:e})=>{let[i,p]=(0,z.useState)([]),[o,c]=(0,z.useState)(()=>{let a=localStorage.getItem("fp_selected_client");return a?parseInt(a):null}),[m,v]=(0,z.useState)(!1),[g,n]=(0,z.useState)(!0),r=(0,z.useRef)(null);(0,z.useEffect)(()=>{x()},[]),(0,z.useEffect)(()=>{let a=u=>{r.current&&!r.current.contains(u.target)&&v(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);let x=async()=>{try{let u=await(await fetch("/wp-json/fp-publisher/v1/clients")).json();p(u.clients||[])}catch(a){console.error("Failed to fetch clients:",a)}finally{n(!1)}},N=a=>{c(a),v(!1),a?localStorage.setItem("fp_selected_client",a.toString()):localStorage.removeItem("fp_selected_client"),e&&e(a),window.location.reload()},l=i.find(a=>a.id===o);return g?React.createElement("div",{className:"fp-client-selector loading"},"Caricamento..."):React.createElement("div",{className:"fp-client-selector",ref:r},React.createElement("button",{className:"client-selector-button",onClick:()=>v(!m),"aria-expanded":m},React.createElement("div",{className:"selected-client"},l?React.createElement(React.Fragment,null,l.logo_url?React.createElement("img",{src:l.logo_url,alt:l.name,className:"client-logo"}):React.createElement("span",{className:"client-badge",style:{backgroundColor:l.color}},l.name.substring(0,2).toUpperCase()),React.createElement("span",{className:"client-name"},l.name)):React.createElement(React.Fragment,null,React.createElement("span",{className:"client-badge",style:{backgroundColor:"#666"}},"ALL"),React.createElement("span",{className:"client-name"},"Tutti i clienti")),React.createElement("span",{className:"dropdown-icon"},m?"\u25B2":"\u25BC"))),m&&React.createElement("div",{className:"client-dropdown"},React.createElement("div",{className:`dropdown-item ${o?"":"active"}`,onClick:()=>N(null)},React.createElement("span",{className:"client-badge",style:{backgroundColor:"#666"}},"ALL"),React.createElement("span",null,"Tutti i clienti"),!o&&React.createElement("span",{className:"check-icon"},"\u2713")),React.createElement("div",{className:"dropdown-divider"}),i.filter(a=>a.status==="active").map(a=>React.createElement("div",{key:a.id,className:`dropdown-item ${o===a.id?"active":""}`,onClick:()=>N(a.id)},a.logo_url?React.createElement("img",{src:a.logo_url,alt:a.name,className:"client-avatar"}):React.createElement("span",{className:"client-badge",style:{backgroundColor:a.color}},a.name.substring(0,2).toUpperCase()),React.createElement("span",null,a.name),o===a.id&&React.createElement("span",{className:"check-icon"},"\u2713"))),React.createElement("div",{className:"dropdown-divider"}),React.createElement("div",{className:"dropdown-item action-item",onClick:()=>{v(!1),window.location.href="/wp-admin/admin.php?page=fp-publisher-clients"}},React.createElement("span",{className:"icon"},"\u2699\uFE0F"),React.createElement("span",null,"Gestisci Clienti"))))};var X=()=>{let i=new URLSearchParams(window.location.search).get("page")||"fp-publisher";return React.createElement("div",{className:"fp-publisher-app"},React.createElement("div",{className:"fp-app-header"},React.createElement("div",{className:"app-logo"},React.createElement("span",{className:"logo-icon"},"\u{1F680}"),React.createElement("span",{className:"logo-text"},"FP Publisher")),React.createElement(H,null)),React.createElement("div",{className:"fp-app-content"},(()=>{switch(i){case"fp-publisher":case"fp-publisher-dashboard":return React.createElement(R,null);case"fp-publisher-composer":return React.createElement(O,null);case"fp-publisher-calendar":return React.createElement(J,null);case"fp-publisher-analytics":return React.createElement(W,null);case"fp-publisher-library":return React.createElement(G,null);case"fp-publisher-clients":return React.createElement(Y,null);case"fp-publisher-accounts":return React.createElement(V,null);case"fp-publisher-jobs":return React.createElement(q,null);case"fp-publisher-settings":return React.createElement(Q,null);default:return React.createElement(R,null)}})()))};var K=document.getElementById("fp-publisher-app");K&&(0,Z.render)(React.createElement(X,null),K);})();
